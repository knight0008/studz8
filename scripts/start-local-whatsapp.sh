#!/bin/bash

echo "ðŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠ"
echo "====================================="

echo "ðŸ“ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª..."
mkdir -p tokens
mkdir -p logs

echo "ðŸ”§ ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©..."
if [ -f ".env.local" ]; then
    echo "âœ… Ù…Ù„Ù .env.local Ù…ÙˆØ¬ÙˆØ¯"
else
    echo "âŒ Ù…Ù„Ù .env.local ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"
    echo "Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env.local Ø£ÙˆÙ„Ø§Ù‹"
    exit 1
fi

echo "ðŸŒ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ù…Ø­Ù„ÙŠ..."
npm run dev:server &
SERVER_PID=$!

echo "â³ Ø§Ù†ØªØ¸Ø§Ø± 5 Ø«ÙˆØ§Ù†ÙŠ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…..."
sleep 5

echo "ðŸ“± Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Venom Bot..."
npm run whatsapp:local

echo "âœ… ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­!"
echo "ðŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Vercel Ù…Ø¹ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠ"

# Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø®Ø§Ø¯Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
kill $SERVER_PID 2>/dev/null